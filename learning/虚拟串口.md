# 虚拟串口

概念：上位机将数据传送给下位机的过程成为串口通信

虚拟串口是一种软件模拟的串口（串行端口），它并不存在于物理硬件上，而是通过**软件**实现的虚拟设备。虚拟串口通常用于模拟传统的硬件串口（如RS-232串口）的功能，以便在没有物理串口的情况下进行串行通信。

## 零，串口调试工具

使用cutecom

```shell
#安装
sudo apt-get install cutecom
#使用
sudo cutecom
```

## 一，开放ubuntu用户串口权限

```shell
# 终端键入
sudo usermod -a -G dialout 用户名 （mzy）
#将 "用户名" 替换为要添加到 dialout 组的实际用户名
#之后重启

#查看串口号
ls -l /dev/tty*
```

## 二，具体实现

注意：	句柄fd

​		设置串口参数

​        将数据转为字节流（使用reinterpret_cast函数）

## 三，名词解释

串口：用于在计算机及其外部设备之间进行数据传输的通信接口

串口文件句柄：当要操作串口设备时，首先要打开串口，并获取文件句柄，通过文件句柄实现读写操作

波特率：用来衡量传输速度，表示每秒钟传输的比特数（一比特是8个二进制位）

停止位：每个数据帧通常包括一个起始位、数据位（可以是5、6、7或8位）和一个或多个停止位。停止位的作用是告诉接收端一个数据帧		已经传输完毕，可以开始接收下一个数据帧。常见的停止位设置包括1位停止位和2位停止位。

效验类型：判断传输的数据是否可靠的方法

缓冲区:临时存储数据 ，发送缓冲区，接收缓冲区，解决数据传输速度不匹配问题

超时时间：传输数据时等待某个事件（比如接收数据或发送数据）发生的最长时间

## 四，常用函数

参数随用随查

```cpp
open()//打开串口,返回串口文件句柄
ttyname()//返回与该文件描述符关联的终端设备的名称字符串。如果成功，它将返回一个指向包含终端设备名称的静态缓冲区的指针。如果失败，它将返回 NULL。
read()//从串口设备文件中读取数据,返回真实读到的数据
perror()// 用于将与特定设备相关的错误消息打印到标准错误流中 
write()//输出数据
tcsetattr()//调用 tcsetattr 函数之后，指定终端设备的属性将会被修改为 options 中定义的属性。
tcflush()//清理缓存区
```

